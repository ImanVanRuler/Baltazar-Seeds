<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Intro Debug Template</title>
<style>
  html,body{height:100%;margin:0;background:#000;color:#fff;font-family:Arial,Helvetica,sans-serif}
  /* Intro overlay */
  #introVideoContainer{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.96);z-index:9999;transition:opacity .35s}
  #introVideoContainer.hidden{opacity:0;pointer-events:none}
  #introVideo{max-width:92vw;max-height:82vh;border-radius:8px;box-shadow:0 20px 50px rgba(0,0,0,.7)}
  #skipIntro{position:absolute;top:16px;right:16px;padding:8px 12px;border-radius:8px;border:2px solid #660000;background:#222;color:#fff;cursor:pointer}
  #debugBox{position:fixed;left:12px;bottom:12px;padding:8px 10px;background:rgba(0,0,0,0.6);border:1px solid #333;border-radius:6px;font-size:13px;z-index:10001;opacity:0.95}
  /* main content hidden initially */
  #mainContent{display:none;padding-bottom:80px}
  header{padding:18px;text-align:center;background:rgba(0,0,0,0.8);position:sticky;top:0}
  h1.glitch{font-size:36px;color:#660000;margin:40px 0;text-align:center}
  .card-section{display:flex;gap:20px;justify-content:center;flex-wrap:wrap;padding:40px}
  .card{width:260px;background:rgba(0,0,0,0.8);border-radius:16px;overflow:hidden;text-align:center;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
  .card img{width:100%;display:block}
  .back-button{display:block;margin:30px auto;padding:12px 20px;background:#222;border:2px solid #660000;border-radius:10px;color:#fff;text-decoration:none}
</style>
</head>
<body>

<!-- Intro Overlay -->
<div id="introVideoContainer" role="dialog" aria-label="Intro Video">
  <!-- Wichtig: muted + playsinline + autoplay -->
  <video id="introVideo" autoplay muted playsinline preload="auto">
    <!-- ersetze 'intro.mp4' mit dem echten Dateinamen -->
    <source src="intro.mp4" type="video/mp4">
    Dein Browser unterstützt das Video-Tag nicht.
  </video>
  <button id="skipIntro" aria-label="Intro überspringen">Skip Intro ✕</button>
</div>

<!-- Debug Box -->
<div id="debugBox">Status: waiting… (Console für Details)</div>

<!-- MAIN CONTENT -->
<div id="mainContent">
  <header><h1>Baltazar Ultra Style Seeds</h1></header>
  <h1 class="glitch">BALTAZAR ULTRA STYLE SEEDS</h1>

  <div class="card-section">
    <div class="card"><img src="F1.JPG" alt="DONKEY OG"><p>DONKEY OG</p></div>
    <div class="card"><img src="F2.JPG" alt="HAZE OG"><p>HAZE OG</p></div>
    <div class="card"><img src="F3.JPG" alt="RAT OG"><p>RAT OG</p></div>
  </div>

  <a class="back-button" href="seite3.html">Back To Menu</a>
</div>

<script>
  const introContainer = document.getElementById('introVideoContainer');
  const introVideo = document.getElementById('introVideo');
  const skipBtn = document.getElementById('skipIntro');
  const mainContent = document.getElementById('mainContent');
  const debugBox = document.getElementById('debugBox');

  // Sichtbarkeit initial
  mainContent.style.display = 'none';

  // Debug-helper
  function debug(msg){
    console.log('[IntroDebug]', msg);
    debugBox.textContent = 'Status: ' + msg;
  }

  // Fallback: wenn Video nicht startet innerhalb X ms -> Hauptseite zeigen
  let started = false;
  const START_TIMEOUT = 4000; // ms
  const fallbackTimer = setTimeout(() => {
    if(!started){
      debug('Fallback: Video konnte nicht starten → zeige Seite');
      showMain();
    }
  }, START_TIMEOUT);

  // Events
  introVideo.addEventListener('playing', () => {
    started = true;
    clearTimeout(fallbackTimer);
    debug('Video spielt (playing)');
  });

  introVideo.addEventListener('canplay', () => debug('canplay'));
  introVideo.addEventListener('canplaythrough', () => debug('canplaythrough'));
  introVideo.addEventListener('waiting', () => debug('waiting / buffering'));
  introVideo.addEventListener('stalled', () => debug('stalled'));
  introVideo.addEventListener('suspend', () => debug('suspend'));
  introVideo.addEventListener('error', (e) => {
    const code = introVideo.error ? introVideo.error.code : 'unknown';
    debug('VIDEO ERROR code=' + code + ' → zeige Seite');
    showMain();
  });

  // Wenn Video zu Ende ist -> Hauptinhalt zeigen
  introVideo.addEventListener('ended', () => {
    debug('Video ENDED → zeige Seite');
    showMain();
  });

  // Skip-Button
  skipBtn.addEventListener('click', () => {
    try { introVideo.pause(); } catch(e){}
    debug('Intro übersprungen');
    showMain();
  });

  // Funktion: Intro ausblenden + main zeigen
  function showMain(){
    if(introContainer.classList.contains('hidden')) return;
    introContainer.classList.add('hidden');
    setTimeout(()=>{
      introContainer.style.display = 'none';
      mainContent.style.display = 'block';
      window.scrollTo(0,0);
    }, 360);
  }

  // Hinweis: wenn du LOOP willst, setze das Attribut loop im <video>.
  // ACHTUNG: Wenn loop gesetzt ist, feuert 'ended' NICHT — benutze stattdessen Zähler oder manuellen Replay.
</script>
</body>
</html>
