<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üåø Mini Farming Game Deluxe+ with Shop</title>
<style>
:root{
  --accent:#00ff7f;
  --bg1:#0f1112;
  --bg2:#121212;
  --card:#161616;
  --muted:#bfc9bd;
  --glass: rgba(255,255,255,0.03);
  --radius:14px;
  --coin:#ffd700;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: 'Trebuchet MS', system-ui;
  background: url('BALTI.JPG') center/cover no-repeat, radial-gradient(circle at 20% 10%, #16201a 0%, #080808 70%);
  color:#e9fff0;
  display:flex;
  justify-content:center;
  padding:28px;
}
.container{
  width:980px;
  max-width:95vw;
  display:grid;
  grid-template-columns: 1fr 320px;
  gap:22px;
}
header{text-align:center; grid-column:1/-1;}
h1{margin:0; font-size:2rem; color:var(--accent); text-shadow:0 0 12px rgba(0,255,127,.3);}
.sub{color:var(--muted); margin-bottom:12px}
.panel{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  padding:14px;
  border-radius:var(--radius);
  border:1px solid rgba(0,255,127,0.08);
  box-shadow:0 6px 30px rgba(0,0,0,.6), inset 0 0 30px rgba(0,255,127,0.02);
}
canvas{width:560px; height:560px; border-radius:12px; background:linear-gradient(180deg,#1b1b1b,#0d0d0d);}
.controls{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
.btn{
  cursor:pointer;
  border:none;
  padding:10px 16px;
  border-radius:12px;
  font-weight:700;
  color:#002;
  background:linear-gradient(145deg,#00ff7f,#00995a);
  box-shadow:0 6px 20px rgba(0,255,127,0.2);
  transition:transform .15s, box-shadow .2s;
}
.btn:hover{box-shadow:0 8px 30px rgba(0,255,127,0.3);}
.btn:active{transform:translateY(2px)}
#infoRow{display:flex; gap:10px; margin-top:10px}
.statBox{flex:1; padding:10px; background:var(--card); border-radius:10px; text-align:center}
.statTitle{font-size:0.8rem; color:var(--muted)}
.statValue{font-weight:700; font-size:1.1rem}
.xpBar{height:12px; background:rgba(255,255,255,0.06); border-radius:999px; overflow:hidden}
.xpFill{height:100%; width:0%; background:linear-gradient(90deg,var(--accent), #8affb8); transition:width .3s}
#strainLog{max-height:180px; overflow:auto; font-size:0.9rem; color:var(--muted); background:var(--glass); border-radius:10px; padding:8px}
.toast, .achievement{position:fixed; left:50%; transform:translateX(-50%);
  background:#111; color:#fff; padding:10px 16px;
  border-radius:999px; border:1px solid rgba(0,255,127,0.08);
  box-shadow:0 8px 30px rgba(0,0,0,.6);
  display:none; z-index:9999;}
.toast{bottom:28px;}
.achievement{top:40px; background:#222; border:1px solid var(--coin);}
.coinIcon{color:var(--coin); font-weight:bold; animation:spin 2s linear infinite;}
@keyframes spin{from{transform:rotate(0);}to{transform:rotate(360deg);}}
.shopItem{margin-top:10px; padding:10px; background:var(--card); border-radius:10px; display:flex; justify-content:space-between; align-items:center;}
.shopItem button{padding:6px 10px; font-size:0.9rem;}
@media(max-width:900px){.container{grid-template-columns:1fr;} canvas{width:100%; height:60vh}}
</style>
</head>
<body>
<div class="container">
<header>
  <h1>üå± Mini Farming Game Deluxe+ Shop</h1>
  <div class="sub">üëâ Plant. Grow. Harvest. Spend coins wisely!</div>
</header>

<main class="panel" id="canvasWrap">
  <canvas id="farmCanvas" width="560" height="560"></canvas>
  <div class="controls">
    <button class="btn" id="plantBtn">üå± Plant seeds</button>
    <button class="btn" id="harvestBtn">üåæ Harvest</button>
    <button class="btn" id="fillBtn">üîÅ Fill all</button>
  </div>

  <div id="infoRow">
    <div class="statBox"><div class="statTitle">Level</div><div class="statValue" id="level">1</div></div>
    <div class="statBox"><div class="statTitle">XP</div><div class="statValue" id="xp">0</div><div class="xpBar"><div id="xpFill" class="xpFill"></div></div></div>
    <div class="statBox"><div class="statTitle">Harvested</div><div class="statValue" id="harvested">0</div></div>
    <div class="statBox"><div class="statTitle">Coins</div><div class="statValue"><span class="coinIcon">üí∞</span> <span id="coins">0</span></div></div>
  </div>
</main>

<aside class="panel">
  <strong>üìù Strain Log</strong>
  <div id="strainLog"></div>

  <strong style="margin-top:10px; display:block;">üõí Shop</strong>
  <div class="shopItem">
    <span>Fertilizer (+50% growth speed)</span>
    <button onclick="buyItem('fertilizer',10)">üí∞ 10 Coins</button>
  </div>
</aside>
</div>

<div class="toast" id="toast"></div>
<div class="achievement" id="achievement"></div>

<script>
// Config
const GRID_SIZE=5;
const strains=[
  {name:"Sticky Buns",color:"#8EE28E",growRate:6,xp:12},
  {name:"Pink Berry Pop",color:"#E6F39B",growRate:8,xp:9},
  {name:"Boom Boom Berry",color:"#6FD08A",growRate:4.5,xp:15},
  {name:"White Rhino",color:"#DFF7D6",growRate:7,xp:10}
];

const canvas=document.getElementById("farmCanvas");
const ctx=canvas.getContext("2d");
const CELL_SIZE=()=>canvas.clientWidth/GRID_SIZE;

let farm=Array.from({length:GRID_SIZE},()=>Array.from({length:GRID_SIZE},()=>null));
let xp=0,level=1,harvested=0,coins=0;
let fertilizerActive=false;

const logEl=document.getElementById("strainLog");
const xpEl=document.getElementById("xp");
const levelEl=document.getElementById("level");
const harvestedEl=document.getElementById("harvested");
const coinsEl=document.getElementById("coins");
const xpFill=document.getElementById("xpFill");

class Plant{
  constructor(strain){this.strain=strain;this.growth=0;}
  grow(dt){
    let speed=this.strain.growRate;
    if(fertilizerActive) speed*=1.5;
    this.growth=Math.min(100,this.growth+speed*(dt/1000));
  }
  isReady(){return this.growth>=100;}
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const cell=CELL_SIZE();
  for(let r=0;r<GRID_SIZE;r++){
    for(let c=0;c<GRID_SIZE;c++){
      const x=c*cell,y=r*cell;
      ctx.fillStyle="#111";ctx.fillRect(x+4,y+4,cell-8,cell-8);
      const p=farm[r][c];
      if(p){
        ctx.fillStyle=p.isReady()?"gold":p.strain.color;
        ctx.beginPath();
        ctx.arc(x+cell/2,y+cell/2,cell/4,0,Math.PI*2);
        ctx.fill();
      }
    }
  }
}

function updateStats(){
  xpEl.textContent=xp; levelEl.textContent=level;
  harvestedEl.textContent=harvested; coinsEl.textContent=coins;
  const pct=Math.min(100,(xp/xpThresholdForLevel(level))*100);
  xpFill.style.width=pct+"%";
}
function xpThresholdForLevel(l){return 40+l*20;}

function addLog(msg){const t=new Date().toLocaleTimeString(); logEl.innerHTML=`<div>[${t}] ${msg}</div>`+logEl.innerHTML;}
function showToast(msg){const t=document.getElementById("toast"); t.textContent=msg; t.style.display="block"; setTimeout(()=>t.style.display="none",1500);}
function showAchievement(msg){const a=document.getElementById("achievement"); a.textContent="üèÜ "+msg; a.style.display="block"; setTimeout(()=>a.style.display="none",2000);}

function checkLevelUp(){
  const threshold=xpThresholdForLevel(level);
  while(xp>=threshold){
    xp-=threshold;
    level++;
    coins+=10;
    addLog(`LEVEL UP ${level}! +10 üí∞`);
    showAchievement(`Level ${level}! +10 Coins`);
  }
}

function plantRandom(){
  for(let r=0;r<GRID_SIZE;r++)
    for(let c=0;c<GRID_SIZE;c++)
      if(!farm[r][c]&&Math.random()<0.25){
        farm[r][c]=new Plant(strains[Math.floor(Math.random()*strains.length)]);
        addLog("üå± Seed planted");
      }
  draw();updateStats();
}

function harvest(){
  let any=false;
  for(let r=0;r<GRID_SIZE;r++)
    for(let c=0;c<GRID_SIZE;c++){
      const p=farm[r][c];
      if(p&&p.isReady()){
        xp+=p.strain.xp; coins+=5; harvested++;
        addLog(`üåæ Harvested ${p.strain.name} +${p.strain.xp} XP +5üí∞`);
        farm[r][c]=null;
        any=true;
      }
    }
  if(any){checkLevelUp();showToast("Harvested!");}else showToast("Nothing ready");
  draw();updateStats();
}

// Shop system
function buyItem(item, cost){
  if(coins<cost){showToast("Not enough coins!"); return;}
  coins-=cost;
  if(item==="fertilizer"){
    fertilizerActive=true;
    addLog("üíö Fertilizer applied! Growth boosted 50% for next harvest.");
    showAchievement("Fertilizer Active!");
    setTimeout(()=>{fertilizerActive=false; addLog("Fertilizer effect worn off.");},30000); // lasts 30s
  }
  updateStats();
}

// Loop
let last=performance.now();
function loop(now){
  const dt=now-last;last=now;
  for(let r=0;r<GRID_SIZE;r++)for(let c=0;c<GRID_SIZE;c++)if(farm[r][c])farm[r][c].grow(dt);
  draw();requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

// Buttons
document.getElementById("plantBtn").onclick=plantRandom;
document.getElementById("harvestBtn").onclick=harvest;
document.getElementById("fillBtn").onclick=()=>{
  for(let r=0;r<GRID_SIZE;r++)for(let c=0;c<GRID_SIZE;c++)if(!farm[r][c])
    farm[r][c]=new Plant(strains[Math.floor(Math.random()*strains.length)]);
  addLog("Filled grid");draw();
};

// Start
plantRandom();updateStats();
</script>
</body>
</html>
