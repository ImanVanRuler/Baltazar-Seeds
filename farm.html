<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mini Farming Game Deluxe</title>
<style>
:root{
  --accent:#00ff7f;
  --bg1:#0f1112;
  --bg2:#121212;
  --card:#161616;
  --muted:#bfc9bd;
  --glass: rgba(255,255,255,0.03);
  --radius:14px;
  --coin-color: #ffd700;
}
*{box-sizing:border-box}
html,body{height:100%;}
body{
  margin:0;
  font-family: 'Trebuchet MS', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  background: url('BALTI.JPG') center/cover no-repeat, radial-gradient(circle at 20% 10%, #16201a 0%, #080808 60%);
  color:#e9fff0;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:28px;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
.container{
  width:980px;
  max-width:95vw;
  display:grid;
  grid-template-columns: 1fr 320px;
  gap:22px;
  align-items:start;
}
header{grid-column:1/-1; text-align:center}
h1{
  margin:0 0 10px 0;
  font-size:1.9rem;
  color:var(--accent);
  text-shadow:0 0 12px rgba(0,255,127,0.12);
}
.sub{color:var(--muted); margin-bottom:12px}
.panel{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
  padding:14px;
  border-radius:var(--radius);
  border:1px solid rgba(0,255,127,0.08);
  box-shadow:0 6px 30px rgba(0,0,0,0.6), inset 0 0 30px rgba(0,255,127,0.02);
}
#canvasWrap{display:flex;flex-direction:column;gap:10px;align-items:center}
canvas{width:560px; height:560px; border-radius:12px; background:linear-gradient(180deg,#1b1b1b,#0d0d0d); box-shadow:0 0 30px rgba(0,255,127,0.06); display:block; image-rendering: pixelated;}
.controls{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.btn{cursor:pointer; border:none; padding:10px 16px; border-radius:12px; background:linear-gradient(#00ff7f,#008a4a); color:#002; font-weight:700; box-shadow:0 6px 20px rgba(0,255,127,0.08); transition:transform .12s}
.btn:active{transform:translateY(2px)}
.btn:disabled{opacity:0.5; cursor:not-allowed; background:gray;}
#infoRow{display:flex; gap:10px; width:100%; margin-top:6px; align-items:center}
.statBox{flex:1; padding:10px; background:var(--card); border-radius:10px; text-align:left}
.statTitle{font-size:0.85rem; color:var(--muted)}
.statValue{font-weight:700; font-size:1.05rem}
#side{display:flex; flex-direction:column; gap:14px}
#stats{min-height:160px}
#strainLog{max-height:220px; overflow:auto; font-size:0.92rem; color:var(--muted); padding:8px; background:var(--glass); border-radius:10px}
#breederCard{display:flex; flex-direction:column; align-items:center; gap:10px; padding:12px}
#breederCard img{width:100%; border-radius:10px; display:block}
#breederCard p{margin:0; font-weight:700; color:var(--muted)}
.xpBar{height:12px; background:rgba(255,255,255,0.04); border-radius:999px; overflow:hidden}
.xpFill{height:100%; width:0%; background:linear-gradient(90deg,var(--accent), #8affb8); transition:width 300ms ease}
.toast{position:fixed; left:50%; transform:translateX(-50%); bottom:28px; background:#09110a; padding:10px 16px; border-radius:999px; border:1px solid rgba(0,255,127,0.08); box-shadow:0 8px 30px rgba(0,0,0,0.6); display:none}
.backLink{display:inline-block; margin-top:12px; color:var(--muted); text-decoration:none}
#shopPanel .shopItem{display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; padding:8px; background:var(--card); border-radius:10px;}
#shopPanel .shopItem button{padding:6px 12px; font-size:0.9rem;}
#achievements ul{list-style:none; padding:0; color:var(--muted);}
#achievements li{margin-bottom:6px; display:flex; align-items:center; gap:6px;}
#achievements li.unlocked{color:var(--accent);}
@media (max-width:900px){
  .container{grid-template-columns:1fr;}
  canvas{width:100%; height:60vh}
}
#confettiCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000; }
</style>
</head>
<body>
<div class="container">
<header>
  <h1>üåø Epic Mini Farming Empire</h1>
  <div class="sub">Unleash seeds, watch them thrive, and harvest epic rewards for ultimate glory!</div>
</header>

<main class="panel" id="canvasWrap">
  <canvas id="farmCanvas" width="560" height="560" aria-label="Farm canvas"></canvas>
  <div class="controls">
    <button class="btn" id="plantBtn">üå± Unleash Random Seed</button>
    <button class="btn" id="harvestBtn">üåæ Harvest Mature Beasts</button>
    <button class="btn" id="fillBtn">üîÅ Dominate Empty Plots</button>
    <div style="flex:1"></div>
    <button class="btn" id="newStartBtn">üöÄ New Empire Start</button>
    <a class="backLink" href="seite3.html">‚óÄ Back to Home Base</a>
  </div>
  <div id="infoRow">
    <div class="statBox">
      <div class="statTitle">Level</div>
      <div class="statValue" id="level">1</div>
    </div>
    <div class="statBox">
      <div class="statTitle">XP</div>
      <div class="statValue" id="xp">0</div>
      <div class="xpBar" style="margin-top:8px"><div id="xpFill" class="xpFill"></div></div>
    </div>
    <div class="statBox">
      <div class="statTitle">Harvested</div>
      <div class="statValue" id="harvested">0</div>
    </div>
    <div class="statBox">
      <div class="statTitle">Coins</div>
      <div class="statValue" id="coins">0</div>
    </div>
  </div>
</main>

<aside class="panel" id="side">
  <div id="stats">
    <strong>üìù Legendary Strain Chronicles</strong>
    <div id="strainLog"></div>
  </div>

  <div id="shopPanel" class="panel">
    <strong>üè™ Ultimate Reward Vault</strong>
    <div id="shopItems"></div>
  </div>

  <div id="achievements" class="panel">
    <strong>üèÜ Epic Achievements</strong>
    <ul id="achievementList"></ul>
  </div>

  <div class="panel">
    <strong>Master the Realm</strong>
    <ul style="padding-left:18px; margin:8px 0 0 0; color:var(--muted)">
      <li>Click a plot to deploy a mighty seed.</li>
      <li>Use "Unleash Random Seed" for chaotic placement.</li>
      <li>Crops evolve over time. Harvest when they glow golden.</li>
      <li>Reap coins and dominate upgrades in the Vault!</li>
    </ul>
  </div>
</aside>
</div>

<div class="toast" id="toast"></div>
<canvas id="confettiCanvas"></canvas>
<audio id="plantSound" src="plant.mp3" preload="auto"></audio>
<audio id="harvestSound" src="harvest.mp3" preload="auto"></audio>
<audio id="levelupSound" src="levelup.mp3" preload="auto"></audio>

<script>
/* --------------------
   GAME SCRIPT START
-------------------- */
const canvas=document.getElementById('farmCanvas');
const ctx=canvas.getContext('2d');
const cols=8, rows=8, cellSize=70;
let farm=[], coins=0, xp=0, harvested=0, level=1;
const strains=[
  {name:"Sticky Buns", color:"limegreen", growRate:2, xp:7},
  {name:"Pink Berry Pop", color:"yellowgreen", growRate:3, xp:5},
  {name:"Boom Boom Berry", color:"mediumseagreen", growRate:1.5, xp:10},
  {name:"White Rhino", color:"palegreen", growRate:2.5, xp:6}
];
const achievements=[
  {id:"firstHarvest", text:"üå± First Harvest", unlocked:false},
  {id:"coinCollector", text:"üí∞ 100 Coins", unlocked:false}
];
let shopItems=[
  {name:"Fertilizer", price:50, effect:"Boost Growth"},
  {name:"Irrigation", price:120, effect:"Auto Water"}
];

function showToast(msg){
  const t=document.getElementById('toast');
  t.innerText=msg;
  t.style.display='block';
  setTimeout(()=>{t.style.display='none'},2000);
}
function initFarm(){farm=[];for(let y=0;y<rows;y++){let row=[];for(let x=0;x<cols;x++){row.push({planted:false,growth:0,strain:null})}farm.push(row);}}
function drawFarm(){ctx.clearRect(0,0,canvas.width,canvas.height);for(let y=0;y<rows;y++){for(let x=0;x<cols;x++){const cell=farm[y][x];ctx.strokeStyle='rgba(0,255,127,0.05)';ctx.strokeRect(x*cellSize,y*cellSize,cellSize,cellSize);if(cell.planted){ctx.fillStyle=cell.strain.color;let size=cell.growth*cellSize;ctx.fillRect(x*cellSize+(cellSize-size)/2,y*cellSize+(cellSize-size),size,size)}}}}
function plantSeed(x,y){const cell=farm[y][x];if(!cell.planted){const strain=strains[Math.floor(Math.random()*strains.length)];cell.planted=true;cell.growth=0;cell.strain=strain;document.getElementById('plantSound').play();showToast(`üå± Planted ${strain.name}`);}}
function growPlants(){for(let y=0;y<rows;y++){for(let x=0;x<cols;x++){const cell=farm[y][x];if(cell.planted && cell.growth<1){cell.growth+=0.01*cell.strain.growRate;if(cell.growth>1)cell.growth=1}}}}
function harvestPlants(){let totalXP=0, totalCoins=0;for(let y=0;y<rows;y++){for(let x=0;x<cols;x++){const cell=farm[y][x];if(cell.planted && cell.growth>=1){totalXP+=cell.strain.xp;totalCoins+=Math.floor(cell.strain.xp*2);cell.planted=false;cell.growth=0;cell.strain=null;harvested++}}}xp+=totalXP;coins+=totalCoins;document.getElementById('harvestSound').play();updateUI();showToast(`üåæ Harvested ${totalCoins} coins!`);checkLevel();checkAchievements();}
function updateUI(){document.getElementById('xp').innerText=xp;document.getElementById('coins').innerText=coins;document.getElementById('harvested').innerText=harvested;document.getElementById('level').innerText=level;document.getElementById('xpFill').style.width=Math.min(100,xp/level*10)+'%';updateStrainLog();updateShop();updateAchievements();}
function updateStrainLog(){let log='';for(let y=0;y<rows;y++){for(let x=0;x<cols;x++){const c=farm[y][x];if(c.planted){log+=`${c.strain.name}: ${(c.growth*100).toFixed(0)}%\n`}}}document.getElementById('strainLog').innerText=log;}
function updateShop(){const s=document.getElementById('shopItems');s.innerHTML='';shopItems.forEach(item=>{const div=document.createElement('div');div.className='shopItem';div.innerHTML=`<span>${item.name} (${item.effect})</span><button>${item.price}üí∞</button>`;div.querySelector('button').addEventListener('click',()=>{if(coins>=item.price){coins-=item.price;showToast(`${item.name} purchased!`);updateUI()}});s.appendChild(div);});}
function checkLevel(){if(xp>=level*20){level++;xp=0;document.getElementById('levelupSound').play();showToast(`‚≠ê Level Up! Level ${level}`);launchConfetti();}}
function checkAchievements(){achievements.forEach(a=>{if(!a.unlocked){if(a.id==="firstHarvest" && harvested>=1){a.unlocked=true;showToast(a.text)} if(a.id==="coinCollector" && coins>=100){a.unlocked=true;showToast(a.text)}}});updateAchievements();}
function updateAchievements(){const list=document.getElementById('achievementList');list.innerHTML='';achievements.forEach(a=>{const li=document.createElement('li');li.innerText=a.text; if(a.unlocked) li.classList.add('unlocked'); list.appendChild(li);});}
canvas.addEventListener('click',(e)=>{const rect=canvas.getBoundingClientRect();const x=Math.floor((e.clientX-rect.left)/cellSize);const y=Math.floor((e.clientY-rect.top)/cellSize);plantSeed(x,y);});
document.getElementById('plantBtn').addEventListener('click',()=>{let emptyCells=[];for(let y=0;y<rows;y++){for(let x=0;x<cols;x++){if(!farm[y][x].planted)emptyCells.push({x,y})}};if(emptyCells.length){const c=emptyCells[Math.floor(Math.random()*emptyCells.length)];plantSeed(c.x,c.y)}})
document.getElementById('harvestBtn').addEventListener('click',harvestPlants)
document.getElementById('fillBtn').addEventListener('click',()=>{for(let y=0;y<rows;y++){for(let x=0;x<cols;x++){if(!farm[y][x].planted)plantSeed(x,y)}}})
document.getElementById('newStartBtn').addEventListener('click',()=>{coins=0;xp=0;harvested=0;level=1;initFarm();updateUI();})
function gameLoop(){growPlants();drawFarm();requestAnimationFrame(gameLoop);}
initFarm();updateUI();gameLoop();

/* --------------- Confetti --------------- */
const confettiCanvas = document.getElementById('confettiCanvas');
const confettiCtx = confettiCanvas.getContext('2d');
let confettiParticles = [];
function launchConfetti(){for(let i=0;i<150;i++){confettiParticles.push({x:Math.random()*window.innerWidth, y:Math.random()*window.innerHeight, vx:(Math.random()-0.5)*4, vy:Math.random()*-6-2, size:Math.random()*6+2, color:`hsl(${Math.random()*360},100%,50%)`})}requestAnimationFrame(drawConfetti);}
function drawConfetti(){confettiCtx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);confettiParticles.forEach((p,index)=>{p.x+=p.vx; p.y+=p.vy; p.vy+=0.1; confettiCtx.fillStyle=p.color; confettiCtx.fillRect(p.x,p.y,p.size,p.size); if(p.y>window.innerHeight){confettiParticles.splice(index,1)}}); if(confettiParticles.length>0)requestAnimationFrame(drawConfetti);}
window.addEventListener('resize',()=>{confettiCanvas.width=window.innerWidth; confettiCanvas.height=window.innerHeight;});
confettiCanvas.width=window.innerWidth; confettiCanvas.height=window.innerHeight;
</script>
</body>
</html>
